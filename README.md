# Blender 3D Model Viewer

高機能な3Dモデルビューアーアプリケーション。Three.jsを使用して、複数の3Dモデル形式をサポートし、直感的なUIで3Dモデルの表示・操作が可能です。

![Blender 3D Model Viewer](https://img.shields.io/badge/Three.js-v0.160.0-blue)
![License](https://img.shields.io/badge/license-MIT-green)

## 🌐 ライブデモ

**[https://www.seta.mydns.jp/3D-viewer/](https://www.seta.mydns.jp/3D-viewer/)**

AWS S3で静的ホスティング中。ブラウザで直接アクセスして3Dモデルビューアーを体験できます！

## 🎯 主な機能

### 📦 モデル管理
- **複数モデルのサポート**: glTF/GLB、STL、OBJ、FBX形式に対応
- **複数モデルの読み込み**: 置き換えモードと追加モードを選択可能
- **ドラッグ&ドロップ**: ファイルを直接ドロップして読み込み
- **モデルリスト**: サイドバーで読み込んだモデルを一覧表示

### 🎨 3D表示機能
- **座標軸ビューアー**: 左上に常時表示されるXYZラベル付き座標軸（カメラと同期）
  - X軸: 赤色（左右方向）
  - Y軸: 緑色（上下方向）
  - Z軸: 青色（前後方向）
- **グリッド表示**: 20x20のグリッドヘルパー
- **ワイヤーフレーム表示**: トグルで切り替え可能
- **OrbitControls**: マウスで自由に視点を操作

### 🎛️ トランスフォーム操作
- **位置調整**: X(左右)、Y(上下)、Z(前後)の3軸で移動
- **スケール調整**: X(幅)、Y(高さ)、Z(奥行)の3軸でサイズ変更
  - 均等スケールオプション付き
- **回転操作**: X(前後)、Y(左右)、Z(回転)の3軸で回転（度数法）
- **直感的なラベル**: 各軸に日本語の説明付き

### 💡 光源設定
- **光源位置調整**: X、Y、Z座標で光源の位置を変更
- **光源色変更**: カラーピッカーで光の色を調整
- **複数光源**: 環境光、指向性ライト、ポイントライト2つ

### 🪟 フローティングパネル
- **ドラッグ可能**: パネル全体をドラッグして自由に配置
- **位置の保存**: ブラウザのlocalStorageに位置を保存
- **閉じる/再表示**: ×ボタンで閉じて、ボタンで再表示可能
- **スマートドラッグ**: 入力フィールドやボタンをクリックした場合はドラッグしない

### 📐 ビューコントロール
- **平面ビュー**: XY、YZ、ZX平面への即座切り替え
- **リセット**: カメラ位置を初期状態に戻す
- **背景色変更**: カラーピッカーで背景色をカスタマイズ

## 🚀 セットアップ

### 必要な環境
- Node.js (v14以上推奨)
- npm または yarn

### インストール

```bash
# リポジトリをクローン
git clone https://github.com/yourusername/3d-viewer.git
cd 3d-viewer

# 依存関係をインストール
npm install

# 開発サーバーを起動
npm run dev
```

開発サーバーが起動したら、ブラウザで `http://localhost:5173` にアクセスしてください。

## 📖 使い方

### モデルの読み込み

1. **ドラッグ&ドロップ**: 3Dモデルファイルを画面中央にドロップ
2. **ファイル選択**: 「読み込み」ボタンをクリックしてファイルを選択

### 読み込みモード

- **置き換え**: 新しいモデルを読み込むと既存のモデルを置き換え
- **追加**: 新しいモデルを既存のモデルに追加

### モデルの操作

1. **選択**: サイドバーのモデルリストからモデルをクリック
2. **トランスフォーム**: トランスフォームパネルで位置・スケール・回転を調整
3. **複製**: 選択したモデルを複製
4. **削除**: 選択したモデルを削除

### カメラ操作

- **回転**: 左クリック + ドラッグ
- **パン**: 右クリック + ドラッグ
- **ズーム**: マウスホイール

### パネル操作

- **移動**: パネルをドラッグして好きな位置に配置
- **閉じる**: パネル右上の×ボタンをクリック
- **再表示**: 
  - トランスフォームパネル: 「📐 トランスフォーム」ボタン
  - 光源設定パネル: 「💡 光源設定」ボタン

## 🛠️ 技術スタック

- **Three.js** (v0.160.0): 3Dレンダリングエンジン
- **Vite** (v5.0.0): ビルドツール
- **Vanilla JavaScript**: フレームワークレス
- **CSS3**: モダンなグラスモーフィズムデザイン

## 📁 プロジェクト構造

```
3d-viewer/
├── index.html          # メインHTMLファイル
├── main.js             # アプリケーションロジック
├── style.css           # スタイルシート
├── package.json        # 依存関係
├── vite.config.js      # Vite設定（S3デプロイ用base設定含む）
├── deploy.ps1          # 3D Viewerデプロイスクリプト
├── deploy-root.ps1     # ルートページデプロイスクリプト
├── DEPLOYMENT.md       # デプロイガイド
├── samples/            # サンプルモデル
│   └── Duck.glb
└── README.md           # このファイル
```

## ☁️ AWS S3デプロイ

このアプリケーションはAWS S3で静的ホスティング可能です。

### 手動デプロイ

```powershell
# ビルド & S3アップロード
.\deploy.ps1
```

### 自動デプロイ (GitHub Actions)

mainブランチにpushすると、自動的にビルド&デプロイが実行されます:

```bash
git push origin main
```

**セットアップ方法**: [GITHUB_ACTIONS.md](GITHUB_ACTIONS.md)を参照

### デプロイ先
- **S3バケット**: `s3://www.seta.mydns.jp/3D-viewer/`
- **公開URL**: https://www.seta.mydns.jp/3D-viewer/

### 詳細情報

デプロイの詳細については、以下のドキュメントを参照してください:

- **[DEPLOYMENT.md](DEPLOYMENT.md)** - S3デプロイの詳細ガイド
  - S3バケット設定方法
  - CORS設定
  - CloudFront統合
  - トラブルシューティング

- **[GITHUB_ACTIONS.md](GITHUB_ACTIONS.md)** - GitHub Actions自動デプロイ設定
  - IAMユーザー作成
  - GitHub Secrets設定
  - ワークフロー設定
  - トラブルシューティング

## 🎨 UI/UX の特徴

- **ダークテーマ**: 目に優しいダークカラースキーム
- **グラスモーフィズム**: 半透明のガラス風デザイン
- **レスポンシブ**: ウィンドウサイズに応じて自動調整
- **直感的な操作**: ドラッグ&ドロップ、ホバーエフェクト
- **日本語UI**: すべてのラベルとメッセージが日本語

## 🔧 カスタマイズ

### 座標軸ビューアーのサイズ変更

`main.js`の`animate()`関数内:

```javascript
const size = 150;  // ピクセル単位でサイズを変更
```

### グリッドのサイズ変更

`main.js`の`init()`関数内:

```javascript
const gridHelper = new THREE.GridHelper(20, 20, 0x444444, 0x222222);
// 第1引数: グリッドのサイズ、第2引数: 分割数
```

### 背景色のデフォルト値

`main.js`の`init()`関数内:

```javascript
scene.background = new THREE.Color(0x0a0e1a);  // 16進数カラーコード
```

## 🐛 トラブルシューティング

### モデルが表示されない

1. ブラウザのコンソールでエラーを確認
2. ハードリロード（Ctrl+Shift+R）を実行
3. サポートされているファイル形式か確認

### パネルが動かない

1. ブラウザのキャッシュをクリア
2. ハードリロード（Ctrl+Shift+R）を実行
3. localStorageをクリア（開発者ツール > Application > Local Storage）

### 座標軸が表示されない

1. ハードリロード（Ctrl+Shift+R）を実行
2. ブラウザのコンソールでJavaScriptエラーを確認

## 📝 ライセンス

MIT License

## 🤝 コントリビューション

プルリクエストを歓迎します！大きな変更の場合は、まずissueを開いて変更内容を議論してください。

## 📧 お問い合わせ

質問や提案がある場合は、GitHubのissueを作成してください。

---

**Enjoy 3D Modeling! 🎨✨**
